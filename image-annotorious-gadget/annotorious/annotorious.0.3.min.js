var h=void 0,j=!0,k=null,l=!1;function o(){return function(){}}function q(a){return function(){return this[a]}}function aa(a){return function(){return a}}var t,ba=ba||{},u=this;function ca(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==h?d[e]=b:d=d[e]?d[e]:d[e]={}}function da(a){for(var a=a.split("."),b=u,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return"array"==fa(a)}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}function ma(a){return"function"==fa(a)}function na(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function w(a){return a[oa]||(a[oa]=++pa)}var oa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),pa=0;
function qa(a,b,c){return a.call.apply(a.bind,arguments)}function ra(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function sa(a,b,c){sa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qa:ra;return sa.apply(k,arguments)}
function ta(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ua=Date.now||function(){return+new Date};function va(a,b){function c(){}c.prototype=b.prototype;a.Ua=b.prototype;a.prototype=new c;a.prototype.constructor=a};var wa={};function xa(a,b){this.x=a;this.y=b};function ya(a){this.va=a};function za(a,b,c,d){0<c?(this.x=a,this.width=c):(this.x=a+c,this.width=-c);0<d?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)};function Aa(a,b){this.type=a;this.geometry=b}function Ba(a){if("rect"==a.type)return a.geometry;if("polygon"==a.type){for(var a=a.geometry.va,b=a[0].x,c=a[0].x,d=a[0].y,e=a[0].y,f=1;f<a.length;f++)a[f].x>c&&(c=a[f].x),a[f].x<b&&(b=a[f].x),a[f].y>e&&(e=a[f].y),a[f].y<d&&(d=a[f].y);return new za(b,d,c-b,e-d)}}
function Ca(a,b){if("rect"==a.type){var c=a.geometry,d=b({x:c.x,y:c.y}),c=b({x:c.width,y:c.height});return new Aa("rect",new za(d.x,d.y,c.x,c.y))}if("polygon"==a.type){var e=[];z(a.geometry.va,function(a){e.push(b(a))});return new Aa("polygon",new ya(e))}};function Ga(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ha(a){if(!Ia.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ja,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ka,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(La,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ma,"&quot;"));return a}var Ja=/&/g,Ka=/</g,La=/>/g,Ma=/\"/g,Ia=/[&<>\"]/,Na={};function Oa(a){return Na[a]||(Na[a]=(""+a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()}))};var A=Array.prototype,Pa=A.indexOf?function(a,b,c){return A.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(v(a))return!v(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},z=A.forEach?function(a,b,c){A.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Qa=A.filter?function(a,b,c){return A.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=v(a)?a.split(""):
a,i=0;i<d;i++)if(i in g){var m=g[i];b.call(c,m,i,a)&&(e[f++]=m)}return e},Ra=A.map?function(a,b,c){return A.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=v(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};function Sa(a,b){var c;a:{c=a.length;for(var d=v(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(h,d[e],e,a)){c=e;break a}c=-1}return 0>c?k:v(a)?a.charAt(c):a[c]}function B(a,b){var c=Pa(a,b),d;(d=0<=c)&&A.splice.call(a,c,1);return d}
function Ta(a){return A.concat.apply(A,arguments)}function Ua(a){if(ga(a))return Ta(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Va(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(ga(d)||(e=ha(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,i=0;i<g;i++)a[f+i]=d[i];else a.push(d)}}function Wa(a,b,c){return 2>=arguments.length?A.slice.call(a,b):A.slice.call(a,b,c)}function Xa(a,b){A.sort.call(a,b||Ya)}
function Ya(a,b){return a>b?1:a<b?-1:0};var Za,$a,ab,bb,eb;function fb(){return u.navigator?u.navigator.userAgent:k}function gb(){return u.navigator}bb=ab=$a=Za=l;var hb;if(hb=fb()){var ib=gb();Za=0==hb.indexOf("Opera");$a=!Za&&-1!=hb.indexOf("MSIE");ab=!Za&&-1!=hb.indexOf("WebKit");bb=!Za&&!ab&&"Gecko"==ib.product}var jb=Za,C=$a,F=bb,G=ab,kb=gb();eb=-1!=(kb&&kb.platform||"").indexOf("Mac");var lb=!!gb()&&-1!=(gb().appVersion||"").indexOf("X11"),mb;
a:{var nb="",ob;if(jb&&u.opera)var pb=u.opera.version,nb="function"==typeof pb?pb():pb;else if(F?ob=/rv\:([^\);]+)(\)|;)/:C?ob=/MSIE\s+([^\);]+)(\)|;)/:G&&(ob=/WebKit\/(\S+)/),ob)var qb=ob.exec(fb()),nb=qb?qb[1]:"";if(C){var rb,sb=u.document;rb=sb?sb.documentMode:h;if(rb>parseFloat(nb)){mb=""+rb;break a}}mb=nb}var tb={};
function H(a){var b;if(!(b=tb[a])){b=0;for(var c=Ga(""+mb).split("."),d=Ga(""+a).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",i=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var x=m.exec(g)||["","",""],p=n.exec(i)||["","",""];if(0==x[0].length&&0==p[0].length)break;b=((0==x[1].length?0:parseInt(x[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==x[1].length?0:parseInt(x[1],10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==x[2].length)<(0==
p[2].length)?-1:(0==x[2].length)>(0==p[2].length)?1:0)||(x[2]<p[2]?-1:x[2]>p[2]?1:0)}while(0==b)}b=tb[a]=0<=b}return b}var ub={};function vb(a){return ub[a]||(ub[a]=C&&!!document.documentMode&&document.documentMode>=a)};var wb,xb=!C||vb(9);!F&&!C||C&&vb(9)||F&&H("1.9.1");C&&H("9");var yb=C||jb||G;function Ab(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=Wa(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)0<=Pa(e,d[g])||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};function I(a,b){this.x=a!==h?a:0;this.y=b!==h?b:0}I.prototype.lb=function(){return new I(this.x,this.y)};function J(a,b){this.width=a;this.height=b}J.prototype.lb=function(){return new J(this.width,this.height)};J.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};J.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Bb(a,b){for(var c in a)b.call(h,a[c],c,a)}function Cb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Db(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Eb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Fb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Eb.length;f++)c=Eb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Gb(a){return a?new Hb(Ib(a)):wb||(wb=new Hb)}function Jb(a,b){Bb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Kb?a.setAttribute(Kb[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var Kb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Lb(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!xb&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',Ha(g.name),'"');if(g.type){f.push(' type="',Ha(g.type),'"');var i={};Fb(i,g);g=i;delete g.type}f.push(">");f=f.join("")}f=e.createElement(f);g&&(v(g)?f.className=g:ga(g)?Ab.apply(k,[f].concat(g)):Jb(f,g));2<d.length&&Mb(e,f,d);return f}
function Mb(a,b,c){function d(c){c&&b.appendChild(v(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ha(f)&&!(na(f)&&0<f.nodeType)?z(Nb(f)?Ua(f):f,d):d(f)}}function Ob(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function Pb(a){if(yb)return a.parentElement;a=a.parentNode;return na(a)&&1==a.nodeType?a:k}
function Qb(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Ib(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Nb(a){if(a&&"number"==typeof a.length){if(na(a))return"function"==typeof a.item||"string"==typeof a.item;if(ma(a))return"function"==typeof a.item}return l}function Hb(a){this.Ja=a||u.document||document}
Hb.prototype.createElement=function(a){return this.Ja.createElement(a)};Hb.prototype.createTextNode=function(a){return this.Ja.createTextNode(a)};function Rb(a){var b=a.Ja,a=!G?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new I(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}Hb.prototype.appendChild=function(a,b){a.appendChild(b)};Hb.prototype.contains=Qb;function K(a,b){var c=Gb().createElement("DIV");c.innerHTML=a(b||Sb,h,h);if(1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType)return d}return c}var Sb={};function Tb(){return j};/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

 The "New" BSD License:

 Copyright (c) 2005-2009, The Dojo Foundation
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
 list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
 this list of conditions and the following disclaimer in the documentation
 and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
 may be used to endorse or promote products derived from this software
 without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
 FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var L=function(){function a(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!v(a))return[a];if(v(c)&&(c=v(c)?document.getElementById(c):c,!c))return[];var c=c||document,e=c.ownerDocument||c.documentElement;ja=c.contentType&&"application/xml"==c.contentType||jb&&(c.doctype||"[object XMLDocument]"==e.toString())||!!e&&(C?e.xml:c.xmlVersion||e.xmlVersion);return(e=d(a)(c))&&e.Qa?e:b(e)}function b(a){if(a&&a.Qa)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;
M++;if(C&&ja){var c=M+"";a[0].setAttribute("_zipIdx",c);for(var d=1,e;e=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(e),e.setAttribute("_zipIdx",c)}else if(C&&a.fc)try{for(d=1;e=a[d];d++)cb(e)&&b.push(e)}catch(f){}else{a[0]&&(a[0]._zipIdx=M);for(d=1;e=a[d];d++)a[d]._zipIdx!=M&&b.push(e),e._zipIdx=M}return b}function c(a,b){if(!b)return 1;var c=Nd(a);return!b[c]?b[c]=1:0}function d(a,b){if(sc){var c=tc[a];if(c&&!b)return c}if(c=uc[a])return c;var c=a.charAt(0),f=-1==a.indexOf(" ");0<=a.indexOf("#")&&
f&&(b=j);if(sc&&!b&&-1==">~+".indexOf(c)&&(!C||-1==a.indexOf(":"))&&!(vc&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var g=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return tc[a]=function(b){try{if(!(9==b.nodeType||f))throw"";var c=b.querySelectorAll(g);C?c.fc=j:c.Qa=j;return c}catch(e){return d(a,j)(b)}}}var i=a.split(/\s*,\s*/);return uc[a]=2>i.length?e(a):function(a){for(var b=0,c=[],d;d=i[b++];)c=c.concat(e(d)(a));return c}}function e(a){var b=wc(Ga(a));if(1==b.length){var c=
f(b[0]);return function(a){if(a=c(a,[]))a.Qa=j;return a}}return function(a){for(var a=Da(a),c,d,e=b.length,g,ia,i=0;i<e;i++){ia=[];c=b[i];d=a.length-1;0<d&&(g={},ia.Qa=j);d=f(c);for(var rc=0;c=a[rc];rc++)d(c,ia,g);if(!ia.length)break;a=ia}return ia}}function f(a){var b=xc[a.ea];if(b)return b;var c=a.Ob,c=c?c.Ra:"",d=n(a,{z:1}),e="*"==a.m,f=document.getElementsByClassName;if(c)f={z:1},e&&(f.m=1),d=n(a,f),"+"==c?b=m(d):"~"==c?b=i(d):">"==c&&(b=g(d));else if(a.id)d=!a.Sb&&e?Tb:n(a,{z:1,id:1}),b=function(b,
c){var e;e=Gb(b);var f=a.id;if(f=(e=v(f)?e.Ja.getElementById(f):f)&&d(e))if(!(f=9==b.nodeType)){for(f=e.parentNode;f&&!(f==b);)f=f.parentNode;f=!!f}if(f)return Da(e,c)};else if(f&&/\{\s*\[native code\]\s*\}/.test(""+f)&&a.w.length&&!vc)var d=n(a,{z:1,w:1,id:1}),p=a.w.join(" "),b=function(a,b){for(var c=Da(0,b),e,f=0,g=a.getElementsByClassName(p);e=g[f++];)d(e,a)&&c.push(e);return c};else!e&&!a.Sb?b=function(b,c){for(var d=Da(0,c),e,f=0,g=b.getElementsByTagName(a.ob());e=g[f++];)d.push(e);return d}:
(d=n(a,{z:1,m:1,id:1}),b=function(b,c){for(var e=Da(0,c),f,g=0,i=b.getElementsByTagName(a.ob());f=i[g++];)d(f,b)&&e.push(f);return e});return xc[a.ea]=b}function g(a){a=a||Tb;return function(b,d,e){for(var f=0,g=b[yc];b=g[f++];)Ea(b)&&(!e||c(b,e))&&a(b,f)&&d.push(b);return d}}function i(a){return function(b,d,e){for(b=b[Fa];b;){if(Ea(b)){if(e&&!c(b,e))break;a(b)&&d.push(b)}b=b[Fa]}return d}}function m(a){return function(b,d,e){for(;b=b[Fa];)if(!db||cb(b)){(!e||c(b,e))&&a(b)&&d.push(b);break}return d}}
function n(a,b){if(!a)return Tb;var b=b||{},c=k;b.z||(c=ka(c,cb));b.m||"*"!=a.m&&(c=ka(c,function(b){return b&&b.tagName==a.ob()}));b.w||z(a.w,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=ka(c,function(a){return d.test(a.className)});c.count=b});b.S||z(a.S,function(a){var b=a.name;zb[b]&&(c=ka(c,zb[b](b,a.value)))});b.Ha||z(a.Ha,function(a){var b,d=a.jb;a.type&&zc[a.type]?b=zc[a.type](d,a.sb):d.length&&(b=Od(d));b&&(c=ka(c,b))});b.id||a.id&&(c=ka(c,function(b){return!!b&&b.id==a.id}));
c||"default"in b||(c=Tb);return c}function x(a){return D(a)%2}function p(a){return!(D(a)%2)}function D(a){var b=a.parentNode,c=0,d=b[yc],e=a._i||-1,f=b._l||-1;if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[Fa])Ea(b)&&(b._i=++c,a===b&&(e=c));return e}function r(a){for(;a=a[Fa];)if(Ea(a))return l;return j}function Ac(a){for(;a=a[Pd];)if(Ea(a))return l;return j}function la(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||
"":"style"==b?a.style.cssText||"":(ja?a.getAttribute(b):a.getAttribute(b,2))||""}function cb(a){return 1==a.nodeType}function ka(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}}function wc(a){function b(){0<=n&&(s.id=c(n,y).replace(/\\/g,""),n=-1);if(0<=p){var a=p==y?k:c(p,y);0>">~+".indexOf(a)?s.m=a:s.Ra=a;p=-1}0<=m&&(s.w.push(c(m+1,y).replace(/\\/g,"")),m=-1)}function c(b,d){return Ga(a.slice(b,d))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",
d=[],e=-1,f=-1,g=-1,i=-1,m=-1,n=-1,p=-1,x="",r="",D,y=0,M=a.length,s=k,E=k;x=r,r=a.charAt(y),y<M;y++)if("\\"!=x)if(s||(D=y,s={ea:k,S:[],Ha:[],w:[],m:k,Ra:k,id:k,ob:function(){return ja?this.oc:this.m}},p=y),0<=e)if("]"==r){E.jb?E.sb=c(g||e+1,y):E.jb=c(e+1,y);if((e=E.sb)&&('"'==e.charAt(0)||"'"==e.charAt(0)))E.sb=e.slice(1,-1);s.Ha.push(E);E=k;e=g=-1}else"="==r&&(g=0<="|~^$*".indexOf(x)?x:"",E.type=g+r,E.jb=c(e+1,y-g.length),g=y+1);else 0<=f?")"==r&&(0<=i&&(E.value=c(f+1,y)),i=f=-1):"#"==r?(b(),n=
y+1):"."==r?(b(),m=y):":"==r?(b(),i=y):"["==r?(b(),e=y,E={}):"("==r?(0<=i&&(E={name:c(i+1,y),value:k},s.S.push(E)),f=y):" "==r&&x!=r&&(b(),0<=i&&s.S.push({name:c(i+1,y)}),s.Sb=s.S.length||s.Ha.length||s.w.length,s.xc=s.ea=c(D,y),s.oc=s.m=s.Ra?k:s.m||"*",s.m&&(s.m=s.m.toUpperCase()),d.length&&d[d.length-1].Ra&&(s.Ob=d.pop(),s.ea=s.Ob.ea+" "+s.ea),d.push(s),s=k);return d}function Da(a,b){var c=b||[];a&&c.push(a);return c}var vc=G&&"BackCompat"==document.compatMode,yc=document.firstChild.children?"children":
"childNodes",ja=l,zc={"*=":function(a,b){return function(c){return 0<=la(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==la(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+la(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+la(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+la(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return la(c,a)==b}}},
db="undefined"==typeof document.firstChild.nextElementSibling,Fa=!db?"nextElementSibling":"nextSibling",Pd=!db?"previousElementSibling":"previousSibling",Ea=db?cb:Tb,zb={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Ac},"last-child":function(){return r},"only-child":function(){return function(a){return!Ac(a)||!r(a)?l:j}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;
if(1===c||3==c)return l}return j}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=wc(b)[0],d={z:1};"*"!=c.m&&(d.m=1);c.w.length||(d.w=1);var e=n(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){if("odd"==b)return x;if("even"==b)return p;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,e=c[1]?parseInt(c[1],10):0,f=0,g=-1;0<d?0>e?e=e%d&&d+e%d:0<
e&&(e>=d&&(f=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(g=e,e%=d));if(0<d)return function(a){a=D(a);return a>=f&&(0>g||a<=g)&&a%d==e};b=e}var i=parseInt(b,10);return function(a){return D(a)==i}}},Od=C?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return ja?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},xc={},uc={},tc={},sc=!!document.querySelectorAll&&(!G||H("526")),M=0,Nd=C?function(a){return ja?a.getAttribute("_uid")||
a.setAttribute("_uid",++M)||M:a.uniqueID}:function(a){return a._uid||(a._uid=++M)};a.S=zb;return a}();ca("goog.dom.query",L);ca("goog.dom.query.pseudos",L.S);!C||vb(9);var Ub=!C||vb(9),Vb=C&&!H("8");!G||H("528");F&&H("1.9b")||C&&H("8")||jb&&H("9.5")||G&&H("528");!F||H("8");function Wb(){}Wb.prototype.Hb=l;Wb.prototype.qa=function(){this.Hb||(this.Hb=j,this.G())};Wb.prototype.G=function(){this.gc&&Xb.apply(k,this.gc)};function Xb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Xb.apply(k,d):d&&"function"==typeof d.qa&&d.qa()}};function N(a,b){this.type=a;this.currentTarget=this.target=b}va(N,Wb);N.prototype.G=function(){delete this.type;delete this.target;delete this.currentTarget};N.prototype.da=l;N.prototype.xa=j;N.prototype.preventDefault=function(){this.xa=l};function Yb(a){Yb[" "](a);return a}Yb[" "]=ea;function Zb(a,b){a&&this.t(a,b)}va(Zb,N);t=Zb.prototype;t.target=k;t.relatedTarget=k;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=l;t.altKey=l;t.shiftKey=l;t.metaKey=l;t.Z=k;
t.t=function(a,b){var c=this.type=a.type;N.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(F){var e;a:{try{Yb(d.nodeName);e=j;break a}catch(f){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=G||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=G||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Z=a;delete this.xa;delete this.da};t.preventDefault=function(){Zb.Ua.preventDefault.call(this);var a=this.Z;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Vb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.ic=q("Z");
t.G=function(){Zb.Ua.G.call(this);this.relatedTarget=this.currentTarget=this.target=this.Z=k};function $b(){}var ac=0;t=$b.prototype;t.key=0;t.fa=l;t.Fb=l;t.t=function(a,b,c,d,e,f){if(ma(a))this.Qb=j;else if(a&&a.handleEvent&&ma(a.handleEvent))this.Qb=l;else throw Error("Invalid listener argument");this.ta=a;this.Xb=b;this.src=c;this.type=d;this.capture=!!e;this.ba=f;this.Fb=l;this.key=++ac;this.fa=l};t.handleEvent=function(a){return this.Qb?this.ta.call(this.ba||this.src,a):this.ta.handleEvent.call(this.ta,a)};var bc={},O={},P={},cc={};
function Q(a,b,c,d,e){if(b){if(ga(b)){for(var f=0;f<b.length;f++)Q(a,b[f],c,d,e);return k}var d=!!d,g=O;b in g||(g[b]={h:0,s:0});g=g[b];d in g||(g[d]={h:0,s:0},g.h++);var g=g[d],i=w(a),m;g.s++;if(g[i]){m=g[i];for(f=0;f<m.length;f++)if(g=m[f],g.ta==c&&g.ba==e){if(g.fa)break;return m[f].key}}else m=g[i]=[],g.h++;f=dc();f.src=a;g=new $b;g.t(c,f,a,b,d,e);c=g.key;f.key=c;m.push(g);bc[c]=g;P[i]||(P[i]=[]);P[i].push(g);a.addEventListener?(a==u||!a.Gb)&&a.addEventListener(b,f,d):a.attachEvent(b in cc?cc[b]:
cc[b]="on"+b,f);return c}throw Error("Invalid event type");}function dc(){var a=ec,b=Ub?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function fc(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)fc(a,b[f],c,d,e);else{d=!!d;a:{f=O;if(b in f&&(f=f[b],d in f&&(f=f[d],a=w(a),f[a]))){a=f[a];break a}a=k}if(a)for(f=0;f<a.length;f++)if(a[f].ta==c&&a[f].capture==d&&a[f].ba==e){R(a[f].key);break}}}
function R(a){if(bc[a]){var b=bc[a];if(!b.fa){var c=b.src,d=b.type,e=b.Xb,f=b.capture;c.removeEventListener?(c==u||!c.Gb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in cc?cc[d]:cc[d]="on"+d,e);c=w(c);e=O[d][f][c];if(P[c]){var g=P[c];B(g,b);0==g.length&&delete P[c]}b.fa=j;e.Vb=j;gc(d,f,c,e);delete bc[a]}}}
function gc(a,b,c,d){if(!d.Na&&d.Vb){for(var e=0,f=0;e<d.length;e++)d[e].fa?d[e].Xb.src=k:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Vb=l;0==f&&(delete O[a][b][c],O[a][b].h--,0==O[a][b].h&&(delete O[a][b],O[a].h--),0==O[a].h&&delete O[a])}}function hc(a){var b,c=0,d=b==k;b=!!b;if(a==k)Bb(P,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)R(f.key),c++}});else if(a=w(a),P[a])for(var a=P[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)R(f.key),c++}}
function ic(a,b,c,d,e){var f=1,b=w(b);if(a[b]){a.s--;a=a[b];a.Na?a.Na++:a.Na=1;try{for(var g=a.length,i=0;i<g;i++){var m=a[i];m&&!m.fa&&(f&=jc(m,e)!==l)}}finally{a.Na--,gc(c,d,b,a)}}return Boolean(f)}function jc(a,b){var c=a.handleEvent(b);a.Fb&&R(a.key);return c}
function ec(a,b){if(!bc[a])return j;var c=bc[a],d=c.type,e=O;if(!(d in e))return j;var e=e[d],f,g;if(!Ub){f=b||da("window.event");var i=j in e,m=l in e;if(i){if(0>f.keyCode||f.returnValue!=h)return j;a:{var n=l;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(x){n=j}if(n||f.returnValue==h)f.returnValue=j}}n=new Zb;n.t(f,this);f=j;try{if(i){for(var p=[],D=n.currentTarget;D;D=D.parentNode)p.push(D);g=e[j];g.s=g.h;for(var r=p.length-1;!n.da&&0<=r&&g.s;r--)n.currentTarget=p[r],f&=ic(g,p[r],d,j,n);if(m){g=
e[l];g.s=g.h;for(r=0;!n.da&&r<p.length&&g.s;r++)n.currentTarget=p[r],f&=ic(g,p[r],d,l,n)}}else f=jc(c,n)}finally{p&&(p.length=0),n.qa()}return f}d=new Zb(b,this);try{f=jc(c,d)}finally{d.qa()}return f};function S(a,b,c){v(b)?kc(a,c,b):Bb(b,ta(kc,a))}function kc(a,b,c){a.style[Oa(c)]=b}function lc(a,b){var c=Ib(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b):""}function mc(a,b){return lc(a,b)||(a.currentStyle?a.currentStyle[b]:k)||a.style&&a.style[b]}function nc(a,b,c){var d,e=F&&(eb||lb)&&H("1.9");b instanceof I?(d=b.x,b=b.y):(d=b,b=c);a.style.left=oc(d,e);a.style.top=oc(b,e)}
function pc(a){var b=a.getBoundingClientRect();C&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function qc(a){if(C&&!vb(8))return a.offsetParent;for(var b=Ib(a),c=mc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=mc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}function Bc(a,b){var c=Cc(a),d=Cc(b);return new I(c.x-d.x,c.y-d.y)}
function Cc(a){var b=new I;if(1==a.nodeType)if(a.getBoundingClientRect)a=pc(a),b.x=a.left,b.y=a.top;else{var c=Rb(Gb(a));var d,e=Ib(a),f=mc(a,"position"),g=F&&e.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==f&&(d=e.getBoxObjectFor(a))&&(0>d.screenX||0>d.screenY),i=new I(0,0),m;d=e?9==e.nodeType?e:Ib(e):document;if(m=C)if(m=!vb(9))Gb(d),m=l;m=m?d.body:d.documentElement;if(a!=m)if(a.getBoundingClientRect)d=pc(a),a=Rb(Gb(e)),i.x=d.left+a.x,i.y=d.top+a.y;else if(e.getBoxObjectFor&&!g)d=e.getBoxObjectFor(a),
a=e.getBoxObjectFor(m),i.x=d.screenX-a.screenX,i.y=d.screenY-a.screenY;else{g=a;do{i.x+=g.offsetLeft;i.y+=g.offsetTop;g!=a&&(i.x+=g.clientLeft||0,i.y+=g.clientTop||0);if(G&&"fixed"==mc(g,"position")){i.x+=e.body.scrollLeft;i.y+=e.body.scrollTop;break}g=g.offsetParent}while(g&&g!=a);if(jb||G&&"absolute"==f)i.y-=e.body.offsetTop;for(g=a;(g=qc(g))&&g!=e.body&&g!=m;)if(i.x-=g.scrollLeft,!jb||"TR"!=g.tagName)i.y-=g.scrollTop}b.x=i.x-c.x;b.y=i.y-c.y}else c=ma(a.ic),i=a,a.targetTouches?i=a.targetTouches[0]:
c&&a.Z.targetTouches&&(i=a.Z.targetTouches[0]),b.x=i.clientX,b.y=i.clientY;return b}function Dc(a,b,c){if(b instanceof J)c=b.height,b=b.width;else if(c==h)throw Error("missing height argument");a.style.width=oc(b,j);a.style.height=oc(c,j)}function oc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function Ec(a){if("none"!=mc(a,"display"))return Fc(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Fc(a);b.display=c;b.position=e;b.visibility=d;return a}function Fc(a){var b=a.offsetWidth,c=a.offsetHeight,d=G&&!b&&!c;return(b===h||d)&&a.getBoundingClientRect?(a=pc(a),new J(a.right-a.left,a.bottom-a.top)):new J(b,c)}
function T(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function U(a,b){a.style.display=b?"":"none"};function Gc(a){var b,c;this.oa=a;this.j=new Hc;this.Ea=[];this.Eb=j;b=Lb("div","annotorious-annotationlayer");S(b,"position","relative");Dc(b,a.width,a.height);Ob(b,a);b.appendChild(a);c=K(Ic,{width:a.width,height:a.height});T(c,0.4);b.appendChild(c);this.o=K(Ic,{width:a.width,height:a.height});U(this.o,l);b.appendChild(this.o);this.popup=new V(b,this);a=new Jc;a.t(this.o,this);this.Ea.push(a);this.la=a;a=new Kc;a.t(this.o,this);this.Ea.push(a);this.O=new Lc(c,this.popup,this);this.editor=new W(this,
b);this.zb=new Mc(this,b);var d=this;Q(b,"mouseover",function(a){a=a.relatedTarget;if(!a||!Qb(b,a))d.j.fireEvent(Nc),T(c,1)});Q(b,"mouseout",function(a){a=a.relatedTarget;if(!a||!Qb(b,a))d.j.fireEvent(Oc),T(c,0.4)});Q(c,"mousedown",function(a){if(d.Eb){U(d.o,j);var b=d.O;b.f=h;Pc(b.p);Qc(b);d.la.ub(a.offsetX,a.offsetY)}});this.j.d(Rc,function(a){a=a.wb;d.editor.za({x:a.left+d.oa.offsetLeft,y:a.bottom+4+d.oa.offsetTop});d.editor.open()});this.j.d(Sc,function(){U(d.o,l);d.la.A()})}t=Gc.prototype;
t.A=function(){U(this.o,l);this.la.A()};t.getItem=function(){return{src:Tc(this.oa)}};t.d=function(a,b){this.j.d(a,b)};t.wa=function(a,b){this.j.wa(a,b)};t.fireEvent=function(a,b){this.j.fireEvent(a,b)};t.k=function(a){this.O.k(a)};t.aa=q("Ea");t.$=q("la");t.ya=function(a){this.la=Sa(this.Ea,function(b){return b.getName()==a})};t.q=function(a){this.O.q(a)};
t.ga=function(a){this.Eb=a;a||(a=this.zb,a.ma(),delete a.Db,delete a.Cb,delete a.gb,delete a.fb,(a=a.element)&&a.parentNode&&a.parentNode.removeChild(a),delete this.zb)};t.v=function(){return this.O.v()};t.Aa=function(a){var b=Ec(this.oa);return{x:a.x/b.width,y:a.y/b.height}};t.Mb=function(a){var b=Ec(this.oa);return{x:a.x*b.width,y:a.y*b.height}};function Uc(a){if("function"==typeof a.H)return a.H();if(v(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Cb(a)}function Vc(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ha(a)||v(a))z(a,b,c);else{var d;if("function"==typeof a.nb)d=a.nb();else if("function"!=typeof a.H)if(ha(a)||v(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Db(a);else d=h;for(var e=Uc(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function Wc(a,b){this.I={};this.l=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Wc?(c=a.nb(),d=a.H()):(c=Db(a),d=Cb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}t=Wc.prototype;t.h=0;t.H=function(){Xc(this);for(var a=[],b=0;b<this.l.length;b++)a.push(this.I[this.l[b]]);return a};t.nb=function(){Xc(this);return this.l.concat()};
function Xc(a){if(a.h!=a.l.length){for(var b=0,c=0;b<a.l.length;){var d=a.l[b];Yc(a.I,d)&&(a.l[c++]=d);b++}a.l.length=c}if(a.h!=a.l.length){for(var e={},c=b=0;b<a.l.length;)d=a.l[b],Yc(e,d)||(a.l[c++]=d,e[d]=1),b++;a.l.length=c}}t.get=function(a,b){return Yc(this.I,a)?this.I[a]:b};t.set=function(a,b){Yc(this.I,a)||(this.h++,this.l.push(a));this.I[a]=b};t.lb=function(){return new Wc(this)};function Yc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Zc(){this.i=new Wc;this.Ba=[];this.M=[];this.xb=[];this.W=[];this.ja=[];this.Za=[]}t=Zc.prototype;t.t=function(){var a=L("img.annotatable",document);Va(this.xb,a);Va(this.W,a);$c(this);var b=this,c=Q(window,"scroll",function(){0<b.W.length?$c(b):R(c)})};
function $c(a){var b=[],c=[],d=[];z(a.W,function(e){if(ad(e)){var f=new Gc(e),g=Tc(e);z(a.Ba,function(a){f.d(a.type,a.ba)});z(a.M,function(a){if(a.onInitAnnotator)a.onInitAnnotator(f)});z(a.ja,function(a){a.src==g&&(f.k(a),c.push(a))});z(a.Za,function(a){a.src==g&&(f.q(a),d.push(a))});a.i.set(g,f);b.push(e)}});z(c,function(b){B(a.ja,b)});z(d,function(b){B(a.Za,b)});z(b,function(b){B(a.W,b)})}t.k=function(a){if(this.P(a.src)){var b=this.i.get(a.src);b?b.k(a):this.ja.push(a)}};
t.d=function(a,b){z(this.i.H(),function(c){c.d(a,b)});this.Ba.push({type:a,ba:b})};t.Ga=function(a){this.M.push(a);z(this.i.H(),function(b){if(a.onInitAnnotator)a.onInitAnnotator(b)})};t.P=function(a){return Yc(this.i.I,a)?j:Sa(this.W,function(b){return Tc(b)==a})!=k};t.$=function(a){if(this.P(a)&&(a=this.i.get(a)))return a.$().getName()};
t.v=function(a){if(a){var b=this.i.get(a);return b?b.v():Qa(this.ja,function(b){return b.src==a})}var c=[];z(this.i.H(),function(a){Va(c,a.v())});Va(c,this.ja);return c};t.aa=function(a){if(this.P(a)&&(a=this.i.get(a)))return Ra(a.aa(),function(a){return a.getName()})};function Tc(a){var b=a.getAttribute("data-original");return b?b:a.src}t.Oa=function(a){this.vb(a)&&(this.xb.push(a),this.W.push(a),$c(this))};t.q=function(a){if(this.P(a.src)){var b=this.i.get(a.src);b?b.q(a):this.Za.push(a)}};
t.ya=function(a,b){if(this.P(a)){var c=this.i.get(a);c&&c.ya(b)}};t.ga=function(a){z(this.i.H(),function(b){b.ga(a)})};t.vb=function(a){return na(a)&&1==a.nodeType?"IMG"==a.tagName:l};function Lc(a,b,c){this.g=a;this.p=b;this.c=c;this.B=[];this.Y=[];this.a=this.g.getContext("2d");this.V=j;var d=this;Q(this.g,"mousemove",function(a){if(d.V){var b=bd(d,a.offsetX,a.offsetY);b?d.f?d.f!=b&&(d.V=l,Pc(d.p)):(d.f=b,Qc(d),d.c.fireEvent(cd,{Q:d.f,Pa:a})):d.f&&(d.V=l,Pc(d.p))}else d.ka=a});c.d(Oc,function(){delete d.f;d.V=j});c.d(dd,function(){if(!d.V&&d.ka){var a=d.f;d.f=bd(d,d.ka.offsetX,d.ka.offsetY);d.V=j;a!=d.f?(Qc(d),d.c.fireEvent(ed,{Q:a,Pa:d.ka}),d.c.fireEvent(cd,{Q:d.f,Pa:d.ka})):
d.f&&fd(d.p)}else Qc(d)})}Lc.prototype.k=function(a){this.B.push(a);var b=a.shapes[0];if("pixel"!=b.units)var c=this,b=Ca(b,function(a){return c.c.Mb(a)});this.Y[w(a)]=b;gd(this,b)};Lc.prototype.q=function(a){a==this.f&&delete this.f;B(this.B,a);delete this.Y[w(a)];Qc(this)};Lc.prototype.v=q("B");function bd(a,b,c){a=hd(a,b,c);if(0<a.length)return a[0]}
function hd(a,b,c){var d=[];z(a.B,function(e){var f;var g=a.Y[w(e)];if("rect"==g.type)f=b<g.geometry.x||c<g.geometry.y||b>g.geometry.x+g.geometry.width||c>g.geometry.y+g.geometry.height?l:j;else if("polygon"==g.type){f=l;for(var i=g.geometry.va,m=g=g.geometry.va.length-1,n=0;n<g;n++){if(i[n].y<c&&i[m].y>=c||i[m].y<c&&i[n].y>=c)i[n].x+(c-i[n].y)/(i[m].y-i[n].y)*(i[m].x-i[n].x)<b&&(f=!f);m=n}}else f=l;f&&d.push(e)});Xa(d,function(a,b){return("rect"==a.shapes[0].type?a.shapes[0].geometry.width*a.shapes[0].geometry.height:
0)>("rect"==b.shapes[0].type?b.shapes[0].geometry.width*b.shapes[0].geometry.height:0)});return d}function gd(a,b,c){var d=Sa(a.c.aa(),function(a){return a.Nb()==b.type});d?d.Ib(a.a,b,c):console.log("WARNING unsupported shape type: "+b.type)}function Qc(a){a.a.clearRect(0,0,a.g.width,a.g.height);z(a.B,function(b){gd(a,a.Y[w(b)])});if(a.f){var b=a.Y[w(a.f)];gd(a,b,j);b=Ba(b);a.p.show(a.f,{x:b.x,y:b.y+b.height+5})}};var id={};
function jd(a){this.C=a;this.J=a.div;var b=parseInt(lc(this.J,"width")),c=parseInt(lc(this.J,"height"));this.j=new Hc;var d=Lb("div","annotorious-annotationlayer");S(d,"position","relative");Dc(d,b,c);Ob(d,this.J);d.appendChild(this.J);var e=K(kd.hint,{Tb:"Press and Hold CTRL to Annotate"});S(e,"z-index",9998);T(e,0);d.appendChild(e);var f=K(ld,{Tb:"Click and Drag"});S(f,"z-index",9998);T(f,0);d.appendChild(f);this.p=new V(d,this);this.O=new md(a,this.p,this);this.o=K(Ic,{width:b,height:c});U(this.o,
l);S(this.o,"z-index",9999);d.appendChild(this.o);this.hb=new Jc;this.bb=new W(this.hb,this);S(this.bb.element,"z-index",1E4);var g=this;Q(d,"mouseover",function(a){a=a.relatedTarget;if(!a||!Qb(d,a))g.j.fireEvent(Nc),T(e,0.8)});Q(d,"mouseout",function(a){a=a.relatedTarget;if(!a||!Qb(d,a))g.j.fireEvent(Oc),T(e,0)});var i=l;Q(document,"keydown",function(a){17==a.keyCode&&(i=j,T(e,0),T(f,0.8),window.setTimeout(function(){T(f,0)},2E3))});Q(document,"keyup",function(){i=l});Q(this.J,"mousedown",function(a){i&&
(U(g.o,j),g.hb.ub(a.clientX,a.clientY))});this.j.d(Rc,function(a){a=a.wb;g.bb.za(a.left+g.J.offsetLeft,a.bottom+4+g.J.offsetTop);g.bb.open()});this.j.d(Sc,function(){g.A()})}t=jd.prototype;t.A=function(){U(this.o,l);this.hb.A()};t.d=function(a,b){this.j.d(a,b)};t.fireEvent=function(a,b){this.j.fireEvent(a,b)};t.Aa=function(a){a=this.C.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return{x:a.lon,y:a.lat}};
t.Mb=function(a){a=this.C.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return{x:a.x,y:a.y}};t.k=function(a){this.O.k(a)};t.q=function(a){this.O.q(a)};function nd(){this.i=new Wc;this.Ba=[];this.M=[];this.cc=[]}t=nd.prototype;t.t=o();t.k=o();t.d=o();t.Ga=o();t.P=o();t.v=o();t.Oa=function(a){var b=new jd(a);z(this.Ba,function(a){b.d(a.type,a.ba)});z(this.M,function(a){a.mc&&a.mc(b.vc());a.lc&&a.lc(b.uc())});this.i.set(map.id,b);this.cc.push(map)};t.q=o();t.ga=o();t.vb=function(a){return a instanceof OpenLayers.Map};function od(){}va(od,Wb);t=od.prototype;t.Gb=j;t.tb=k;t.addEventListener=function(a,b,c,d){Q(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){fc(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=O;if(b in c){if(v(a))a=new N(a,this);else if(a instanceof N)a.target=a.target||this;else{var d=a,a=new N(b,this);Fb(a,d)}var d=1,e,c=c[b],b=j in c,f;if(b){e=[];for(f=this;f;f=f.tb)e.push(f);f=c[j];f.s=f.h;for(var g=e.length-1;!a.da&&0<=g&&f.s;g--)a.currentTarget=e[g],d&=ic(f,e[g],a.type,j,a)&&a.xa!=l}if(l in c)if(f=c[l],f.s=f.h,b)for(g=0;!a.da&&g<e.length&&f.s;g++)a.currentTarget=e[g],d&=ic(f,e[g],a.type,l,a)&&a.xa!=l;else for(e=this;!a.da&&e&&f.s;e=e.tb)a.currentTarget=
e,d&=ic(f,e,a.type,l,a)&&a.xa!=l;a=Boolean(d)}else a=j;return a};t.G=function(){od.Ua.G.call(this);hc(this);this.tb=k};function md(a,b,c){this.C=a;this.p=b;S(this.p.element,"z-index",99E3);this.Da=[];this.Ya=new OpenLayers.Layer.Boxes("Annotorious");this.C.addLayer(this.Ya);var d=this;this.C.events.register("move",this.C,function(){if(d.U){var a=d.U.ua.div,b=Bc(a,d.C.div),a=parseInt(a.style[Oa("height")]||"",10);d.p.za(b.x,b.y+a+5)}});c.d(dd,function(){d.eb==d.U?fd(d.p):pd(d,d.eb,d.U)})}
function pd(a,b,c){if(b){var d=Bc(b.ua.div,a.C.div),e=parseInt(b.ua.div.style[Oa("height")]||"",10);S(b.Pb,"border-color","#fff000");a.p.show(b.Q,d.x,d.y+e+5);a.U=b}else delete a.U;c&&S(c.Pb,"border-color","#fff")}
md.prototype.k=function(a){var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));Ab(b.div,"annotorious-ol-boxmarker-outer");S(b.div,"border",k);var c=Lb("div","annotorious-ol-boxmarker-inner");Dc(c,"100%","100%");b.div.appendChild(c);var d={Q:a,ua:b,Pb:c},e=this;Q(c,"mouseover",function(){e.U||pd(e,d);e.eb=d});Q(c,"mouseout",function(){delete e.eb;Pc(e.p)});this.Da.push(d);Xa(this.Da,function(a,b){var c=a.Q.shapes[0].geometry;return wa.hc.size(b.Q.shapes[0].geometry)-
wa.hc.size(c)});var f=1E4;z(this.Da,function(a){S(a.ua.div,"z-index",f);f++});this.Ya.addMarker(b)};md.prototype.q=function(a){var b=Sa(this.Da,function(b){return b.Q==a});b&&this.Ya.removeMarker(b.ua)};window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});function Kc(){}t=Kc.prototype;t.t=function(a,b){this.g=a;this.c=b;this.a=a.getContext("2d");this.N=[];this.K=l};
t.ia=function(){function a(a,b){return 1<c.N.length&&5>Math.abs(a-c.b.x)&&5>Math.abs(b-c.b.y)}function b(a,b){c.a.clearRect(0,0,c.g.width,c.g.height);c.a.lineWidth=2.5;c.a.strokeStyle="#000000";c.a.beginPath();c.a.moveTo(c.b.x,c.b.y);z(c.N,function(a){c.a.lineTo(a.x,a.y)});c.a.lineTo(a.x,a.y);c.a.stroke();c.a.lineWidth=1.4;c.a.strokeStyle="#ffffff";c.a.beginPath();c.a.moveTo(c.b.x,c.b.y);z(c.N,function(a){c.a.lineTo(a.x,a.y)});c.a.lineTo(a.x,a.y);c.a.stroke();b&&(c.a.lineWidth=1,c.a.fillStyle="#ffffff",
c.a.strokeStyle="#000000",c.a.beginPath(),c.a.arc(a.x,a.y,3.5,0,2*Math.PI,l),c.a.fill(),c.a.stroke())}var c=this;this.L=Q(this.g,"mousemove",function(d){c.K&&(c.dc={x:d.offsetX,y:d.offsetY},b(c.dc,a(d.offsetX,d.offsetY)))});this.X=Q(this.g,"mouseup",function(d){a(d.offsetX,d.offsetY)?(c.K=l,b(c.b),c.c.fireEvent(Rc,{Pa:d,shape:c.Ka(),wb:c.La()})):c.N.push({x:d.offsetX,y:d.offsetY})})};t.ma=function(){this.L&&(R(this.L),delete this.L);this.X&&(R(this.X),delete this.X)};t.getName=aa("polygon");
t.Nb=aa("polygon");t.ub=function(a,b){this.K=j;this.ia();this.b=new xa(a,b);this.c.fireEvent(qd,{offsetX:a,offsetY:b});S(document.body,"-webkit-user-select","none")};t.A=function(){this.ma();this.a.clearRect(0,0,this.g.width,this.g.height);S(document.body,"-webkit-user-select","auto");this.N=[]};t.Ka=function(){var a=[];a.push(this.c.Aa(this.b));var b=this;z(this.N,function(c){a.push(b.c.Aa(c))});return new Aa("polygon",new ya(a))};
t.La=function(){var a=this.b.x,b=this.b.x,c=this.b.y,d=this.b.y;z(this.N,function(e){e.x>a&&(a=e.x);e.x<b&&(b=e.x);e.y>d&&(d=e.y);e.y<c&&(c=e.y)});return{top:c,right:a,bottom:d,left:b}};
t.Ib=function(a,b,c){c=c?"#fff000":"#ffffff";a.lineWidth=2.5;a.strokeStyle="#000000";a.beginPath();b=b.geometry.va;a.moveTo(b[0].x,b[0].y);for(var d=1;d<b.length;d++)a.lineTo(b[d].x,b[d].y);a.lineTo(b[0].x,b[0].y);a.stroke();a.lineWidth=1.4;a.strokeStyle=c;a.beginPath();a.moveTo(b[0].x,b[0].y);for(d=1;d<b.length;d++)a.lineTo(b[d].x,b[d].y);a.lineTo(b[0].x,b[0].y);a.stroke()};function Jc(){}t=Jc.prototype;t.t=function(a,b){this.g=a;this.c=b;this.a=a.getContext("2d");this.a.lineWidth=1;this.K=l};
t.ia=function(){var a=this;this.L=Q(this.g,"mousemove",function(b){if(a.K){a.u={x:b.offsetX,y:b.offsetY};a.a.clearRect(0,0,a.g.width,a.g.height);var b=a.u.x-a.b.x,c=a.u.y-a.b.y;a.a.strokeStyle="#000000";a.a.strokeRect(a.b.x+0.5,a.b.y+0.5,b,c);a.a.strokeStyle="#ffffff";0<b&&0<c?a.a.strokeRect(a.b.x+1.5,a.b.y+1.5,b-2,c-2):0<b&&0>c?a.a.strokeRect(a.b.x+1.5,a.b.y-0.5,b-2,c+2):0>b&&0>c?a.a.strokeRect(a.b.x-0.5,a.b.y-0.5,b+2,c+2):a.a.strokeRect(a.b.x-0.5,a.b.y+1.5,b+2,c-2)}});this.X=Q(this.g,"mouseup",
function(b){a.K=l;var c=a.Ka();c?a.c.fireEvent(Rc,{Pa:b,shape:c,wb:a.La()}):a.c.fireEvent(Sc)})};t.ma=function(){this.L&&(R(this.L),delete this.L);this.X&&(R(this.X),delete this.sc)};t.getName=aa("rect_drag");t.Nb=aa("rect");t.ub=function(a,b){this.K=j;this.ia();this.b=new xa(a,b);this.c.fireEvent(qd,{offsetX:a,offsetY:b});S(document.body,"-webkit-user-select","none")};t.A=function(){this.ma();this.a.clearRect(0,0,this.g.width,this.g.height);S(document.body,"-webkit-user-select","auto");delete this.u};
t.Ka=function(){if(this.u){var a=this.La(),b=this.c.Aa({x:a.left,y:a.top}),a=this.c.Aa({x:a.right-1,y:a.bottom-1});return new Aa("rect",new za(b.x,b.y,a.x-b.x,a.y-b.y))}};t.La=function(){var a,b;this.u.x>this.b.x?(a=this.u.x,b=this.b.x):(a=this.b.x,b=this.u.x);var c,d;this.u.y>this.b.y?(c=this.b.y,d=this.u.y):(c=this.u.y,d=this.b.y);return{top:c,right:a,bottom:d,left:b}};
t.Ib=function(a,b,c){if("rect"==b.type){var d;c?(c="#fff000",d=1.2):(c="#ffffff",d=1);b=b.geometry;a.strokeStyle="#000000";a.lineWidth=d;a.strokeRect(b.x+0.5,b.y+0.5,b.width+1,b.height+1);a.strokeStyle=c;a.strokeRect(b.x+1.5,b.y+1.5,b.width-1,b.height-1)}};function rd(a,b,c){this.src=a;this.text=b;this.shapes=[c];this.context=document.URL};function ad(a){for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return b<window.pageYOffset+window.innerHeight&&c<window.pageXOffset+window.innerWidth&&b+e>window.pageYOffset&&c+d>window.pageXOffset}function sd(a){if("function"==typeof window.onload){var b=window.onload;window.onload=function(){b();a()}}else window.onload=a};function X(){this.D=[new Zc];id&&this.D.push(new nd);this.M=[];var a=this;sd(function(){z(a.D,function(a){a.t()});z(a.M,function(b){b.initPlugin&&b.initPlugin(a);z(a.D,function(a){a.Ga(b)})})})}function td(a,b){return Sa(a.D,function(a){return a.P(b)})}t=X.prototype;t.k=function(a){var b=td(this,a.src);b&&b.k(a)};t.d=function(a,b){z(this.D,function(c){c.d(a,b)})};t.Ga=function(a,b){this.M.push(new window.annotorious.plugin[a](b))};t.$=function(a){var b=td(this,a);if(b)return b.$(a)};
t.v=function(a){if(a){var b=td(this,a);return b?b.v(a):[]}var c=[];z(this.D,function(a){Va(c,a.v())});return c};t.aa=function(a){var b=td(this,a);if(b)return b.aa(a)};t.Oa=function(a){var b=Sa(this.D,function(b){return b.vb(a)});if(b)b.Oa(a);else throw"Error: Annotorious does not support this media type in the current version or build configuration.";};t.q=function(a){var b=td(this,a.src);b&&b.q(a)};t.ya=function(a,b){var c=td(this,a);c&&c.ya(a,b)};t.ga=function(a){z(this.D,function(b){b.ga(a)})};
window.anno=new X;X.prototype.addAnnotation=X.prototype.k;X.prototype.addHandler=X.prototype.d;X.prototype.addPlugin=X.prototype.Ga;X.prototype.getActiveSelector=X.prototype.$;X.prototype.getAnnotations=X.prototype.v;X.prototype.getAvailableSelectors=X.prototype.aa;X.prototype.makeAnnotatable=X.prototype.Oa;X.prototype.removeAnnotation=X.prototype.q;X.prototype.setActiveSelector=X.prototype.ya;X.prototype.setSelectionEnabled=X.prototype.ga;function W(a,b){this.element=K(ud);this.c=a;this.bc=a.getItem();this.Fa=L(".annotorious-editor-text",this.element)[0];this.$b=L(".annotorious-editor-button-cancel",this.element)[0];this.yb=L(".annotorious-editor-button-save",this.element)[0];this.ac=Pb(this.yb);this.Ca=[];var c=this;Q(this.$b,"click",function(b){b.preventDefault();a.A();c.close()});Q(this.yb,"click",function(b){b.preventDefault();a.k(vd(c));a.fireEvent(wd,vd(c));a.A();c.close()});U(this.element,l);b.appendChild(this.element);this.Fa.focus()}
W.prototype.ib=function(a){var b=Lb("div","annotorious-editor-field");v(a)?b.innerHTML=a:ma(a)&&this.Ca.push({z:b,Lb:a});a=this.ac;a.parentNode&&a.parentNode.insertBefore(b,a)};W.prototype.open=function(){U(this.element,j);this.Fa.focus()};W.prototype.close=function(){U(this.element,l);this.Fa.value=""};W.prototype.za=function(a){nc(this.element,a.x,a.y)};function vd(a){return new rd(a.bc.src,a.Fa.value,a.c.$().Ka())}W.prototype.addField=W.prototype.ib;function Hc(){this.na=[]}Hc.prototype.d=function(a,b){this.na[a]||(this.na[a]=[]);this.na[a].push(b)};Hc.prototype.wa=function(a,b){var c=this.na[a];c&&B(c,b)};Hc.prototype.fireEvent=function(a,b){var c=this.na[a];c&&z(c,function(a){a(b)})};var Nc="onMouseOverItem",Oc="onMouseOutOfItem",cd="onMouseOverAnnotation",ed="onMouseOutOfAnnotation",qd="onSelectionStarted",Sc="onSelectionCanceled",Rc="onSelectionCompleted",dd="beforePopupHide",wd="onAnnotationCreated",xd={};function Mc(a,b){var c=this;this.element=K(yd);this.c=a;this.Bb=L(".annotorious-hint-msg",this.element)[0];this.Ab=L(".annotorious-hint-icon",this.element)[0];this.gb=function(){c.show()};this.fb=function(){zd(c)};this.ia();zd(this);b.appendChild(this.element)}Mc.prototype.ia=function(){var a=this;this.Db=Q(this.Ab,"mouseover",function(){a.show();window.clearTimeout(a.cb)});this.Cb=Q(this.Ab,"mouseout",function(){zd(a)});this.c.d(Nc,this.gb);this.c.d(Oc,this.fb)};
Mc.prototype.ma=function(){R(this.Db);R(this.Cb);this.c.wa(Nc,this.gb);this.c.wa(Oc,this.fb)};Mc.prototype.show=function(){window.clearTimeout(this.cb);T(this.Bb,0.8);var a=this;this.cb=window.setTimeout(function(){zd(a)},3E3)};function zd(a){window.clearTimeout(a.cb);T(a.Bb,0)};function V(a,b){this.element=K(Ad);this.c=b;this.ec=L(".annotorious-popup-text",this.element)[0];this.n=L(".annotorious-popup-button-delete",this.element)[0];this.ab=l;this.Ca=[];var c=L(".annotorious-popup-button-delete",this.element)[0],d=this;Q(c,"click",function(){T(d.element,0);S(d.element,"pointer-events","none");b.fireEvent("onAnnotationRemoved",d.f);b.q(d.f)});Q(this.n,"mouseover",function(){T(d.n,0.9)});Q(this.n,"mouseout",function(){T(d.n,0.4)});Q(this.element,"mouseover",function(){window.clearTimeout(d.$a);
0.4>(d.n.style[Oa("opacity")]||"")&&T(d.n,0.4);fd(d)});Q(this.element,"mouseout",function(){T(d.n,0);Pc(d)});b.d(xd.rc,function(){Pc(d)});T(this.n,0);T(this.element,0);S(this.element,"pointer-events","none");a.appendChild(this.element)}V.prototype.ib=function(a){var b=Lb("div","annotorious-popup-field");v(a)?b.innerHTML=a:ma(a)&&this.Ca.push({z:b,Lb:a});this.element.appendChild(b)};
function Pc(a){a.ab=l;a.pa||(a.pa=window.setTimeout(function(){a.c.fireEvent(dd,a);a.ab||(T(a.element,0),S(a.element,"pointer-events","none"),T(a.n,0.4),delete a.pa)},300))}function fd(a){a.ab=j;a.pa&&(window.clearTimeout(a.pa),delete a.pa)}
V.prototype.show=function(a,b){fd(this);if(a&&b){this.f=a;this.ec.innerHTML=a.text?a.text.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1" target="blank">$1</a>'):'<span class="annotorious-popup-empty">No comment</span>';"editable"in a&&a.editable==l?U(this.n,l):U(this.n,j);this.za(b);this.$a&&window.clearTimeout(this.$a);T(this.n,0.4);var c=this;this.$a=window.setTimeout(function(){T(c.n,0)},1E3);z(this.Ca,function(b){b.z.innerHTML=b.Lb(a)})}T(this.element,
0.9);S(this.element,"pointer-events","auto")};V.prototype.za=function(a){nc(this.element,new I(a.x,a.y))};V.prototype.addField=V.prototype.ib;C&&H(8);"ScriptEngine"in u&&"JScript"==u.ScriptEngine()&&(u.ScriptEngineMajorVersion(),u.ScriptEngineMinorVersion(),u.ScriptEngineBuildVersion());function Bd(a){return"object"===typeof a&&a&&0===a.tc?a.content:(""+a).replace(Cd,Dd)}var Ed={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\u000c":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Dd(a){return Ed[a]}var Cd=/[\x00\x22\x26\x27\x3c\x3e]/g;function yd(){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">Click and Drag to Annotate</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'}
function Ad(){return'<div class="annotorious-popup" style="position:absolute;"><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a><span class="annotorious-popup-text"></span></div>'}
function ud(){return'<div class="annotorious-editor" style="position:absolute;"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..."></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);">Save</a></div></form></div>'};var kd={};function Ic(a){return'<canvas class="annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+Bd(a.width)+"px; height:"+Bd(a.height)+'px;" width="'+Bd(a.width)+'" height="'+Bd(a.height)+'"></canvas>'};function ld(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint annotorious-ol-hint-secondary" style="width: 400px; margin:0px auto;">'+Bd(a.Tb)+"</dvi></div>"};var Fd=u.window;function Gd(a){return Hd(a||arguments.callee.caller,[])}
function Hd(a,b){var c=[];if(0<=Pa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Id(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Id(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Hd(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Id(a){if(Jd[a])return Jd[a];a=""+a;if(!Jd[a]){var b=/function ([^\(]+)/.exec(a);Jd[a]=b?b[1]:"[Anonymous]"}return Jd[a]}var Jd={};function Kd(a,b,c,d,e){this.reset(a,b,c,d,e)}Kd.prototype.Kb=k;Kd.prototype.Jb=k;var Ld=0;Kd.prototype.reset=function(a,b,c,d,e){"number"==typeof e||Ld++;d||ua();this.sa=a;this.kc=b;delete this.Kb;delete this.Jb};Kd.prototype.Zb=function(a){this.sa=a};function Y(a){this.Ub=a}Y.prototype.Sa=k;Y.prototype.sa=k;Y.prototype.kb=k;Y.prototype.ca=k;function Md(a,b){this.name=a;this.value=b}Md.prototype.toString=q("name");var Qd=new Md("SEVERE",1E3),Rd=new Md("WARNING",900),Sd=new Md("CONFIG",700),Td=new Md("FINE",500);t=Y.prototype;t.getName=q("Ub");t.d=function(a){this.ca||(this.ca=[]);this.ca.push(a)};t.wa=function(a){var b=this.ca;return!!b&&B(b,a)};t.getParent=q("Sa");t.Zb=function(a){this.sa=a};function Ud(a){return a.sa?a.sa:a.Sa?Ud(a.Sa):k}
t.log=function(a,b,c){if(a.value>=Ud(this).value){a=this.jc(a,b,c);b="log:"+a.kc;u.console&&(u.console.timeStamp?u.console.timeStamp(b):u.console.markTimeline&&u.console.markTimeline(b));u.msWriteProfilerMark&&u.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.ca)for(var e=0,f=h;f=c.ca[e];e++)f(d);b=b.getParent()}}};
t.jc=function(a,b,c){var d=new Kd(a,""+b,this.Ub);if(c){d.Kb=c;var e;var f=arguments.callee.caller;try{var g;var i=da("window.location.href");if(v(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:i,stack:"Not available"};else{var m,n,x=l;try{m=c.lineNumber||c.wc||"Not available"}catch(p){m="Not available",x=j}try{n=c.fileName||c.filename||c.sourceURL||i}catch(D){n="Not available",x=j}g=x||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:m,fileName:n,
stack:c.stack||"Not available"}:c}e="Message: "+Ha(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Ha(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ha(Gd(f)+"-> ")}catch(r){e="Exception trying to expose exception! You win, we lose. "+r}d.Jb=e}return d};function Z(a,b){a.log(Td,b,h)}var Vd={},Wd=k;
function Xd(a){Wd||(Wd=new Y(""),Vd[""]=Wd,Wd.Zb(Sd));var b;if(!(b=Vd[a])){b=new Y(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Xd(a.substr(0,c));c.kb||(c.kb={});c.kb[d]=b;b.Sa=c;Vd[a]=b}return b};function Yd(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function Zd(){this.Ta=h}function $d(a){var b=[];ae(new Zd,a,b);return b.join("")}
function ae(a,b,c){switch(typeof b){case "string":be(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==k){c.push("null");break}if(ga(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],ae(a,a.Ta?a.Ta.call(b,""+f,e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),be(f,c),c.push(":"),
ae(a,a.Ta?a.Ta.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var ce={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},de=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function be(a,b){b.push('"',a.replace(de,function(a){if(a in ce)return ce[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return ce[a]=e+b.toString(16)}),'"')};function ee(){}ee.prototype.Ia=k;var fe;function ge(){}va(ge,ee);function he(a){return(a=ie(a))?new ActiveXObject(a):new XMLHttpRequest}function je(a){var b={};ie(a)&&(b[0]=j,b[1]=j);return b}ge.prototype.pb=k;
function ie(a){if(!a.pb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.pb=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.pb}fe=new ge;var ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function le(a){this.headers=new Wc;this.ha=a||k}va(le,od);le.prototype.r=Xd("goog.net.XhrIo");var me=/^https?$/i,ne=[];function oe(a,b,c,d){var e=new le;ne.push(e);b&&Q(e,"complete",b);Q(e,"ready",ta(pe,e));e.send(a,c,d,h)}function pe(a){a.qa();B(ne,a)}t=le.prototype;t.F=l;t.e=k;t.Wa=k;t.rb="";t.Rb="";t.ra="";t.mb=l;t.Ma=l;t.qb=l;t.R=l;t.Va=0;t.T=k;t.Yb="";t.qc=l;
t.send=function(a,b,c,d){if(this.e)throw Error("[goog.net.XhrIo] Object is active with another request");b=b?b.toUpperCase():"GET";this.rb=a;this.ra="";this.Rb=b;this.mb=l;this.F=j;this.e=this.ha?he(this.ha):he(fe);this.Wa=this.ha?this.ha.Ia||(this.ha.Ia=je(this.ha)):fe.Ia||(fe.Ia=je(fe));this.e.onreadystatechange=sa(this.Wb,this);try{Z(this.r,$(this,"Opening Xhr")),this.qb=j,this.e.open(b,a,j),this.qb=l}catch(e){Z(this.r,$(this,"Error opening Xhr: "+e.message));qe(this,e);return}var a=c||"",f=this.headers.lb();
d&&Vc(d,function(a,b){f.set(b,a)});"POST"==b&&!Yc(f.I,"Content-Type")&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Vc(f,function(a,b){this.e.setRequestHeader(b,a)},this);this.Yb&&(this.e.responseType=this.Yb);"withCredentials"in this.e&&(this.e.withCredentials=this.qc);try{this.T&&(Fd.clearTimeout(this.T),this.T=k),0<this.Va&&(Z(this.r,$(this,"Will abort after "+this.Va+"ms if incomplete")),this.T=Fd.setTimeout(sa(this.pc,this),this.Va)),Z(this.r,$(this,"Sending request")),
this.Ma=j,this.e.send(a),this.Ma=l}catch(g){Z(this.r,$(this,"Send error: "+g.message)),qe(this,g)}};t.pc=function(){"undefined"!=typeof ba&&this.e&&(this.ra="Timed out after "+this.Va+"ms, aborting",Z(this.r,$(this,this.ra)),this.dispatchEvent("timeout"),this.abort(8))};function qe(a,b){a.F=l;a.e&&(a.R=j,a.e.abort(),a.R=l);a.ra=b;re(a);se(a)}function re(a){a.mb||(a.mb=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
t.abort=function(){this.e&&this.F&&(Z(this.r,$(this,"Aborting")),this.F=l,this.R=j,this.e.abort(),this.R=l,this.dispatchEvent("complete"),this.dispatchEvent("abort"),se(this))};t.G=function(){this.e&&(this.F&&(this.F=l,this.R=j,this.e.abort(),this.R=l),se(this,j));le.Ua.G.call(this)};t.Wb=function(){!this.qb&&!this.Ma&&!this.R?this.nc():te(this)};t.nc=function(){te(this)};
function te(a){if(a.F&&"undefined"!=typeof ba)if(a.Wa[1]&&4==ue(a)&&2==ve(a))Z(a.r,$(a,"Local request error detected and ignored"));else if(a.Ma&&4==ue(a))Fd.setTimeout(sa(a.Wb,a),0);else if(a.dispatchEvent("readystatechange"),4==ue(a)){Z(a.r,$(a,"Request complete"));a.F=l;var b=ve(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:c=j;break a;default:c=l}if(!c){if(b=0===b)b=(""+a.rb).match(ke)[1]||k,!b&&self.location&&(b=self.location.protocol,b=b.substr(0,b.length-1)),b=!me.test(b?
b.toLowerCase():"");c=b}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var d;try{d=2<ue(a)?a.e.statusText:""}catch(e){Z(a.r,"Can not get status: "+e.message),d=""}a.ra=d+" ["+ve(a)+"]";re(a)}se(a)}}function se(a,b){if(a.e){var c=a.e,d=a.Wa[0]?ea:k;a.e=k;a.Wa=k;a.T&&(Fd.clearTimeout(a.T),a.T=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.r.log(Qd,"Problem encountered resetting onreadystatechange: "+e.message,h)}}}function ue(a){return a.e?a.e.readyState:0}
function ve(a){try{return 2<ue(a)?a.e.status:-1}catch(b){return a.r.log(Rd,"Can not get status: "+b.message,h),-1}}function we(a){if(a.e)return Yd(a.e.responseText)}function $(a,b){return b+" ["+a.Rb+" "+a.rb+" "+ve(a)+"]"};function xe(a){this.Xa=a.base_url;this.B=[]}xe.prototype.initPlugin=function(a){var b=this;a.d(wd,function(a){ye(b,a)});a.d("onAnnotationRemoved",function(a){ze(b,a)});Ae(b,a)};function Be(a){window.alert("ERROR");console.log(a)}function Ae(a,b){oe(a.Xa+"_search?query=*:*&size=1000",function(c){try{var d=we(c.target).hits.hits;z(d,function(c){var d=c._source;d.id=c._id;0<=Pa(a.B,d.id)||(a.B.push(d.id),d.shapes[0].geometry&&b.k(d))})}catch(e){Be(e)}})}
function ye(a,b){oe(a.Xa+"annotation/",function(a){a=we(a.target)._id;b.id=a},"POST",$d(b))}function ze(a,b){oe(a.Xa+"annotation/"+b.id,o(),"DELETE")}window.annotorious.plugin.ElasticSearch=xe;